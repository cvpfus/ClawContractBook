# Run from repo root with main compose:
#   docker compose -f docker-compose.yml -f docker-compose.verification-worker.yml up -d --build

services:
  verification-worker:
    build:
      context: .
      dockerfile: apps/verification-worker/Dockerfile
    environment:
      DATABASE_URL: ${DATABASE_URL:-postgresql://app:password@postgres:5432/clawcontractbook}
      S3_ENDPOINT: ${S3_ENDPOINT:-http://seaweedfs:8333}
      S3_ACCESS_KEY: ${S3_ACCESS_KEY:-admin}
      S3_SECRET_KEY: ${S3_SECRET_KEY:-key}
      S3_PUBLIC_URL: ${S3_PUBLIC_URL:-http://seaweedfs:8333/clawcontractbook}
      BSCSCAN_API_KEY: ${BSCSCAN_API_KEY:-}
      CLAWCONTRACT_OPENROUTER_API_KEY: ${CLAWCONTRACT_OPENROUTER_API_KEY:-}
      CLAWCONTRACT_OPENROUTER_MODEL: ${CLAWCONTRACT_OPENROUTER_MODEL:-}
    restart: unless-stopped
